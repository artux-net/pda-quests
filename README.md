# Тестирование
Быстрые спавны на локации [фриплей]:

1. Кордон - Свалка: 2:2:200
2. Свалка - Кордон: 2:2:201
3. Кордон - Черноюыль-4: 2:2:202
4. Чернобыль-4 - Кордон: 2:2:203
5. Свалка - Бар : 2:2:204
6. Бар - Свалка: 2:2:205
7. Свалка - Темная Долина: 2:2:206
8. ТД - Свалка: 2:2:207
9. Бар - Дикая Территория: 2:2:208
10. ДТ - Бар: 2:2:209
11. Бар - Арм. склады: 2:2:210
12. Арм - Бар: 2:2:211
13. ДТ - Янтарь: 2:2:212
14. Янтарь - ДТ: 2:2:213
Для удобства, через запуск стадии в ПДА.

# Сожержимое 

### Права доступа ("access")
Содержится в файле info.json. Задает категорию пользователей, кому доступна история. Если у пользователя не подходящий приоритет - историю не получит. Значения расположены в порядке возрастания приоритета.
```
USER
TESTER
MODERATOR
ADMIN
```
Например, пользователю с ролью TESTER будут доступны истории с значением USER и TESTER, но не доступны истории MODERATOR.

## Структура сюжета
Один сюжет представляет собой одну родительскую папку в которой содержится файл описания info.json, файлы глав и папка с картами. Главы и карты представляют собой файлы с любым именем и форматом (подразумевается, что формат json, а файл соответствует нужной структуре). 

## Основные понятия
### Сюжет
Подразумевает всю описание сжета, текстовую часть(истории) и карты.

### История (Story)
Представляет собой набор глав, который может отображаться в начальном меню ПДА.
История всегда начинается с 1 главы, 0 стадии и далее следует в необходимом игроку порядке.

### Глава (Chapter)
Глава представляет собой набор стадий и ссылок на музыку.

### Стадия, экран, сцена
Стадия самое малое звено всей цепи. Содержит в себе всю необходимую информацию для отображения в ПДА.  
А именно: 
- заголовок
- тип
- фон
- сообщение и его тип
- отображаемый на экран текст (с условием)
- переходы (с названием, след. стадией  и условием отображения)
- действия которые необходимо выполнить при прохождении этой стадии

## Условия
**отсутствует документация**
Смотреть примеры в сюжетах.

## Действия
Инструкция по действиям - https://dev.artux.net/pdanetwork/utility/help  
ID предмета брать как последнее число в URL от открытой страницы в энциклопедии: https://dev.artux.net/pdanetwork/enc  
ID группировки ниже в этом же файле.  
Логин и пароль от ПДА. Для входа нужна роль как минимум тестировщика.  

## Значения полей стадий
Типы стадий:
```
0 - обычная сцена
1 - сцена разговора
4 - переход на карту
5 - загрузка другой главы
6 - переход на продавца
```

В тексте могут использоваться placeholders:
```
@name
@nickname
@money
@xp
@login
@location
@gang
@pdaId
```

# Карты

## Точки

### Типы точек
Типы задают только иконку, отображаемую на карте, логика может быть разной. Например, точка с иконкой продавца, но без задания идентификатора продавца, зато с логикой сюжетной точки - переход в главу.
```
[0, 3] - сюжетные точки, 0 и 1 отображаемые, 2 и 3 невидимые. 3 и 1 немедленно запустятся, 0 и 1 требуют согласия игрока
[4] - продавец
[5] - тайник
[6] - дополнительный квест
[7] - переход на другую локацию
```

## Спавны
Спавны нужны для задания точек с ботами на карте.
Поле n задает количество ботов на спавне, r - радиус спавна.
### Группировки
В спавне указывается поле group, который задает группировку располагаемую на спавне. Примеры значений: 
```
    LONERS(0),
    BANDITS(1),
    MILITARY(2),
    LIBERTY(3),
    DUTY(4),
    MONOLITH(5),
    MERCENARIES(6),
    SCIENTISTS(7),
    CLEARSKY(8);
```
Задается без скобок и чисел. Число означает id группировки. Id используется для задания отношения через actions.

### Сила спавна
Поле strength. Значения:
```
    WEAK,
    MIDDLE,
    STRONG
```
### Параметры data
Поле data задает дополнительные параметры для спавна.
```
immortal неубиваемость ботов спавна
untarget невозможность игрока прицелится
angryOnPlayer принудительная агрессия на игрока
angry агрессия на всех
ignorePlayer игнор игрока
alwaysIgnored игнор всеми независимо от отношений
hide скрытие метки контрольной точки
```
### Таблица отношений ботов
 Сочетание | LONERS(0) | BANDITS(1) | MILITARY(2) | LIBERTY(3) | DUTY(4) | MONOLITH(5) | MERCENARIES(6) | SCIENTISTS(7) |CLEARSKY(8)
 --- | --- | --- | --- | --- | --- | --- | --- | --- | --- 
 LONERS(0) | 0 | -4| 0|0|0|-5|-2|2|0
 BANDITS(1) | -5 | 0 |  0 |  0 | 0 | -5 | -2 | -2 | -4 
 MILITARY(2) | 0 | -2 | 0 | -4 | 4 | -5 | -4 | 3 | -3 
 LIBERTY(3) | 2 |-4 |-5 | 5 |-5 | 0 |-1 |5 |3 
 DUTY(4) | -1 |-3 |5 | -4 | 4 | -5 |0 | 0 |  -2 
 MONOLITH(5) | -5 | -5 |-5 |-5 |-5 | -5 |  -5 |-5 |  -5 
 MERCENARIES(6) | 0 |-5 |-5 |-5 |-5 |-5 |-5 |-5 |-5 
 SCIENTISTS(7) |0 | 0 |0 | 0 |  0 |  0 |  0 | 0 | 0 
CLEARSKY(8) | 0 |-5 |   0 |  0 |  -5 |   -5 |  -4 | 3 |      5 

# Редакторы историй
Онлайн редактор: https://pda-quest-editor.pages.dev/  
Оффлайн редактор: https://drive.google.com/file/d/1bHlyZ9tyy8C3JAAQ8LfRSp2Gr3Ls1K-X/view?usp=sharing
